<block-ui>
  <div class="row">

    <div class="col-lg-12">
      <div class="row">
        <div class="col-lg-12">
          <div class="card card-border-primary">
            <div class="card-header">
              <h5>Assign </h5>


              <!-- <button class="btn btn-primary float-right" (click)="openModal(template)"><i
                  class=" icofont icofont-plus "></i> Create Package</button> -->

            </div>
            <div class="card-block ">
              <div class="row ">

              </div>

              <div class="col-md-12">
                <div class="row">
                  <div class="col-md-6">
                    <div class="row">
                      <div class="col-lg-5">
                        <div class="form-group">
                          <label class="col-form-label required">Select Customer Type </label>
                          <ng-select [(ngModel)]="selectedRoleType" [clearable]="false" [clearOnBackspace]="false"
                            (change)="onCustomerTypeChange($event)" [items]="roleTypes" [multiple]=false
                            bindLabel="name" bindValue="id" placeholder="Select type"> </ng-select>
                        </div>
                      </div>

                      <div class="col-lg-7" *ngIf="studentList.length > 0">
                        <div class="form-group">
                          <label class="col-form-label required">Select Student </label>
                          <ng-select (change)="onStudentChange($event)" [(ngModel)]="selectedCustomer"
                            [clearable]="false" [clearOnBackspace]="false" [items]="studentList" [multiple]=false
                            bindLabel="name" bindValue="id" placeholder="Select Student">
                            <ng-template ng-label-tmp let-item="item">
                              <p>{{item.name}} ({{item.mobile_no}})</p>
                            </ng-template>
                            <ng-template ng-option-tmp let-item="item" let-index="index" let-search="searchTerm">
                              <p>{{item.name}} ({{item.mobile_no}})</p>
                            </ng-template>

                          </ng-select>
                        </div>
                      </div>

                      <div class="col-lg-7" *ngIf="instituteList.length > 0">
                        <div class="form-group">
                          <label class="col-form-label required">Select Institute </label>
                          <ng-select (change)="onInstituteChange($event)" [(ngModel)]="selectedInstitute"
                            [clearable]="false" [clearOnBackspace]="false" [items]="instituteList" [multiple]=false
                            bindLabel="name" bindValue="id" placeholder="Select institute"> </ng-select>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <ngx-datatable class="material " [rows]="rows" [loadingIndicator]="loadingIndicator"
                      [columnMode]="ColumnMode.force" [headerHeight]="40" [footerHeight]="50" rowHeight="auto"
                      [externalPaging]="false" [limit]="5">

                      <ngx-datatable-column [width]="30" name="#Sl" prop="id" [draggable]="false" [sortable]="false">
                        <ng-template let-rowIndex="rowIndex" ngx-datatable-cell-template>
                          <span> {{ rowIndex + 1}} </span>
                        </ng-template>
                      </ngx-datatable-column>

                      <ngx-datatable-column [width]="80" name="Type" prop="type" [draggable]="false" [sortable]="false">
                        <ng-template let-value="value" ngx-datatable-cell-template>
                          <span title="{{ value }}"> {{ value }} </span>
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column [width]="200" name="Item Name" prop="title" [draggable]="false"
                        [sortable]="false">
                        <ng-template let-value="value" ngx-datatable-cell-template>
                          <span title="{{ value }}"> {{ value }} </span>
                        </ng-template>
                      </ngx-datatable-column>
                      <!-- <ngx-datatable-column [width]="50" name="Purchased" prop="purchased" [draggable]="false" [sortable]="false">
                        <ng-template let-value="value" ngx-datatable-cell-template>
                          <span title="{{ value }}"> {{ value }} </span>
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column [width]="50" name="Consumed" prop="consumed" [draggable]="false" [sortable]="false">
                        <ng-template let-value="value" ngx-datatable-cell-template>
                          <span title="{{ value }}"> {{ value }} </span>
                        </ng-template>
                      </ngx-datatable-column> -->
                      <ngx-datatable-column [width]="70" name="Remaining" prop="remaining" [draggable]="false"
                        [sortable]="false">
                        <ng-template let-value="value" ngx-datatable-cell-template>
                          <span title="{{ value }}"> {{ value }} </span>
                        </ng-template>
                      </ngx-datatable-column>

                    </ngx-datatable>
                  </div>
                </div>
              </div>





              <!-- <div class="col-lg-2 " *ngIf="instituteList.length > 0 || studentList.length > 0">
                  <div class="form-group mt-4">                  
                    <button class="btn btn-success  btn-outline-success  float-right" (click)="onSearchSubmit()">
                      <i class="icofont-search"></i> Search
                  </button>        
                  </div>                  
                </div> -->
              <!-- <div class="row" *ngIf="instituteList.length > 0 || studentList.length > 0">
                
                <div class="col-lg-4">
                  <div class="form-group">
                    <label class="col-form-label required">Select Package </label>
                    <ng-select [clearable]="true" [(ngModel)]="selectedPackage" [clearOnBackspace]="false" (change)="onPackageChange($event)"
                    [items]="packageList" [multiple]=false bindLabel="name" bindValue="id"
                    placeholder="Select package">  </ng-select>                 
                  </div>                  
                </div>  

              </div> -->
              <hr>


            </div>
          </div>
        </div>
      </div>

      <div class="row mt-2" *ngIf="batchList.length > 0">
        <div class="col-lg-12">
          <div class="card card-border-primary">
            <div class="card-header">
              <h5>Batch Students </h5>

            </div>
            <div class="card-block ">
              <div class="col-md-12">
                <tabset>
                  <tab *ngFor="let tabz of tabs" [heading]="tabz.title" [active]="tabz.active"
                    (selectTab)="tabz.active = true" (deselect)="tabz.active = false" [disabled]="tabz.disabled"
                    [removable]="tabz.removable" [customClass]="tabz.customClass">
                    <!-- {{tabz?.content}} -->
                    <div class="row mt-3">
                      <div class="col-sm-3 mt-3" *ngFor="let item of tabz.items">
                        <div class="checkbox-fade fade-in-primary">
                          <label>
                            <input type="checkbox" [(ngModel)]="item.selected">
                            <span class="cr"><i class="cr-icon icofont icofont-ui-check txt-primary"></i></span>
                            <span> <b>{{item.name}} </b> ({{item.mobile_no}}) </span>
                          </label>
                        </div>
                      </div>

                    </div>
                  </tab>
                </tabset>
              </div>

            </div>
          </div>
        </div>
      </div>
      <div class="row mt-2 mb-5" *ngIf="packageList.length > 0">
        <div class="col-lg-12">
          <div class="card card-border-primary">
            <div class="card-header">
              <h5> Correction Details </h5>

            </div>
            <div class="card-block ">
              <div class="row">
                <div class="col-lg-4">
                  <div class="form-group">
                    <label class="col-form-label required">Select Package </label>
                    <ng-select [clearable]="true" [clearOnBackspace]="false" (change)="onPackageChange($event)"
                      [items]="packageList" [multiple]=false bindLabel="name" bindValue="id"
                      placeholder="Select package"> </ng-select>
                  </div>
                </div>

                <div class="col-lg-12 mt-4" *ngIf="packageItemList.length > 0">
                  <table class="table table-sm">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Type</th>
                        <th scope="col">Title</th>
                        <th scope="col">Description</th>
                        <th scope="col">Remaining</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of packageItemList">
                        <th scope="row">
                          <div class="checkbox-fade fade-in-primary">
                            <label>
                              <input type="checkbox" [(ngModel)]="item.selected">
                              <span class="cr"><i class="cr-icon icofont icofont-ui-check txt-primary"></i></span>                            
                            </label>
                          </div>
                        </th>
                        <td><p>{{item.type}}</p></td>
                        <td><p>{{item.title}}</p></td>
                        <td><p>{{item.description}}</p></td>
                        <td><p>{{item.remaining}}</p></td>
                      </tr>
                   
                    </tbody>
                  </table>
                </div>
                <hr>
                <div class="col-lg-4 mt-4" *ngIf="packageItemList.length > 0">

                  <div class="form-group row">
                    <label class="col-sm-4 col-form-label required"> Course Name </label>
                    <div class="col-sm-8">
                      <input type="text" [(ngModel)]="inputCourse" placeholder="Enter coures name" type="text" class="form-control" /> 
                    </div>
                  </div>

                </div>
                <div class="col-lg-5 mt-4" *ngIf="packageItemList.length > 0">
                  <div class="form-group row">
                    <label class="col-sm-4 col-form-label required"> Appeared Date </label>
                    <div class="col-sm-8">
                      <!--<mat-form-field>
                        <input matInput [(ngModel)]="appearedData" [ngxMatDatetimePicker]="picker" placeholder="Choose a date"    [min]="minDate" [max]="maxDate" [disabled]="disabled">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <ngx-mat-datetime-picker #picker [showSpinners]="showSpinners" [showSeconds]="showSeconds"
                          [stepHour]="stepHour" [stepMinute]="stepMinute" [stepSecond]="stepSecond" [touchUi]="touchUi"
                          [color]="color" [enableMeridian]="enableMeridian">
                        </ngx-mat-datetime-picker>
                      </mat-form-field>--> 
                    </div>
                  </div>

                </div>
                <div class="col-lg-3 mt-4" (click)="onFormSubmit()" *ngIf="packageItemList.length > 0">
                  <button class="btn btn-success btn-block btn-outline-success" ><i
                    class="icofont icofont-check-circled"></i> Submit </button>
                </div>


              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

  </div>


</block-ui>